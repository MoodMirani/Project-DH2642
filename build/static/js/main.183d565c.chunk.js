(this.webpackJsonpPopify=this.webpackJsonpPopify||[]).push([[0],{24:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},48:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){"use strict";c.r(t);var r=c(2),a=c(3),n=c.n(a),s=c(35),i=c.n(s),l=(c(64),c(6)),o=(c(65),"https://api.spotify.com/v1"),u="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("0ce6ae9e52b0477a86e4b06d7135b5d2","&redirect_uri=").concat("http://localhost:3000/","&scope=").concat(["streaming","user-read-email","user-read-private","user-modify-playback-state"].join("%20"),"&response_type=token&show_dialog=true"),j=function(e){return{method:"GET",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}};var b=function(){return Object(r.jsxs)("div",{className:"login",children:[Object(r.jsx)("img",{src:"https://i.ibb.co/rsCJb8L/popify-Logo.png",alt:"Popify logo",border:"0"}),Object(r.jsx)("a",{href:u,children:"START POPIFYING"})]})},d=c(51),h=c.n(d),m=Object(a.createContext)(),O=function(e){var t=e.reducer,c=e.initialState,n=e.children;return Object(r.jsx)(m.Provider,{value:Object(a.useReducer)(t,c),children:n})},p=function(){return Object(a.useContext)(m)};c(24);var f=function(e){var t=e.onSearch,c=n.a.useState(""),a=Object(l.a)(c,2),s=a[0],i=a[1],o=n.a.useState(""),u=Object(l.a)(o,2),j=u[0],b=u[1];return Object(r.jsxs)(n.a.Fragment,{children:[Object(r.jsx)("img",{className:"logo",src:"https://i.ibb.co/283SGvS/popi-Trans.png",alt:"Popify logo",height:"100px"}),Object(r.jsx)("input",{className:"searchbar",id:"searchbar_id",placeholder:"What do you want to listen to?",onChange:function(e){return i(e.target.value)}}),Object(r.jsxs)("select",{className:"options",onChange:function(e){return b(e.target.value)},children:[Object(r.jsx)("option",{value:"",children:" Choose: "}),["album","artist","track"].map((function(e){return Object(r.jsx)("option",{value:e,children:e},e)}))]}),Object(r.jsx)("button",{className:"btnSearch",id:"searchbtn_id",onClick:function(e){return t(j,s)},children:"Search!"}),Object(r.jsx)("script",{children:null!==document.getElementById("searchbar_id")?document.getElementById("searchbar_id").addEventListener("keyup",(function(e){e.preventDefault(),13===e.keyCode&&document.getElementById("searchbtn_id").click()})):""})]})},x={search:function(e){var t=e.type,c=e.text,r=e.token;null==t&&(t=""),null==c&&(c="");var a=t+"s";return fetch(o+"/search?q="+c+"&type="+t,j(r)).then((function(e){return e.json()})).then((function(e){return e[a].items}))},searchAlbum:function(e){var t=e.id,c=e.token;return fetch("".concat(o,"/albums/").concat(t,"/tracks"),j(c)).then((function(e){return e.json()}))},searchTrack:function(e){var t=e.id,c=e.token;return fetch("".concat(o,"/tracks/").concat(t),j(c)).then((function(e){return e.json()}))}},y=c.p+"static/media/spinner-big.07d0e5bd.gif";var k=function(e,t,c){return(e?c&&Object(r.jsx)("h1",{children:"error"}):"no data")||!t&&Object(r.jsx)("img",{className:"centrePROM",src:y,alt:""})},v=(c(40),c(66),c(43)),g=c.n(v),N=c(52),S=(c(41),c(10)),T=function(e){var t=e.spotifyObject,c=e.lyricsData;return Object(r.jsx)("div",{className:"flexboxWrapper",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"column",children:Object(r.jsx)("div",{className:"trackContainer",children:Object(r.jsx)("img",{className:"trackPic",src:t.album.images[0]&&t.album.images[0].url,alt:""})})}),Object(r.jsx)("div",{className:"column",children:Object(r.jsxs)("div",{className:"lyricsContainer",children:[Object(r.jsxs)("p",{className:"headingTitle",children:[Object(r.jsx)("span",{className:"artistTitle",children:t.artists[0].name}),Object(r.jsx)("span",{className:"trackTitle",children:t.name})]}),Object(r.jsx)(S.b,{to:"/",children:Object(r.jsx)("button",{className:"button",children:"Back to search"})}),Object(r.jsx)("p",{className:"lyricsCopy",children:c.lyrics_copyright}),Object(r.jsx)("p",{className:"lyricsStyle",style:{whiteSpace:"pre-line"},children:c.lyrics_body})]})})]})})},_=function(e){var t=e.spotifyObject;return Object(r.jsx)("div",{className:"flexboxWrapper",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"column",children:Object(r.jsx)("div",{className:"trackContainer",children:Object(r.jsx)("img",{className:"trackPic",src:t.album.images[0]&&t.album.images[0].url,alt:""})})}),Object(r.jsx)("div",{className:"column",children:Object(r.jsxs)("div",{className:"lyricsContainer",children:[Object(r.jsxs)("p",{className:"headingTitle",children:[Object(r.jsx)("span",{className:"artistTitle",children:t.artists[0].name}),Object(r.jsx)("span",{className:"trackTitle",children:t.name})]}),Object(r.jsx)(S.b,{to:"/",children:Object(r.jsx)("button",{className:"button",children:"Back to search"})}),Object(r.jsx)("p",{className:"lyricsStyle",style:{whiteSpace:"pre-line"},children:"There is no lyrics avaible for this track"})]})})]})})},E="df5661c198e8ac1b5dba0f079f8458ff",C={getId:function(e,t){return fetch("https://cors-anywhere.herokuapp.com/http://api.musixmatch.com/ws/1.1/track.search?q_artist=".concat(encodeURI(e),"&q_track=").concat(encodeURI(t),"&apikey=").concat(E),{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.message.body.track_list[0].track.track_id})).catch((function(e){return console.error(e)}))},getLyrics:function(e){return fetch("https://cors-anywhere.herokuapp.com/http://api.musixmatch.com/ws/1.1/track.lyrics.get?track_id=".concat(e,"&apikey=").concat(E),{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.message.body.lyrics}))},matchLyrics:function(e,t){return fetch("https://cors-anywhere.herokuapp.com/http://api.musixmatch.com/ws/1.1/matcher.track.get?q_artist=".concat(encodeURI(e),"&q_track=").concat(encodeURI(t),"&apikey=").concat(E),{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.message.body}))}};var A=function(e){var t=n.a.useState(null),c=Object(l.a)(t,2),r=c[0],a=c[1],s=n.a.useState(null),i=Object(l.a)(s,2),o=i[0],u=i[1];return n.a.useEffect((function(){a(null),u(null),e&&e.then((function(e){return a(e)})).catch((function(e){return u(e)}))}),[e]),[r,o]},w=c(93),R=c(101),I=c(26),P=c(55).a.initializeApp({apiKey:"AIzaSyAz-PmJus3p1-JkkwjHniXXGCOGRCKcJdI",authDomain:"popify-dh2642.firebaseapp.com",databaseURL:"https://popify-dh2642-default-rtdb.firebaseio.com/",projectId:"popify-dh2642",storageBucket:"popify-dh2642.appspot.com",messagingSenderId:"1082530079583",appId:"1:1082530079583:web:55bc14c921a60f52840cea",measurementId:"G-ZVQZ20ZBXF"}),L=(c(78),c(95)),U=c(96),B=c(97),G=c(98),D=c(99),z=c(100);var F=function(e){var t=e.currentTrack,c=e.player,a=e.user,s=e.likedSongs,i=(e.getUserLikes,e.dispatch),o=n.a.useState(30),u=Object(l.a)(o,2),j=u[0],b=u[1];return Object(r.jsxs)("div",{className:"footer__play",children:[Object(r.jsxs)("div",{className:"footer__left",children:[null===t?Object(r.jsx)("img",{alt:""}):Object(r.jsx)("img",{alt:"",className:"footer__albumLogo",src:"track"===t.type?t.album.images[0].url:""}),Object(r.jsxs)("div",{className:"footer__songInfo",children:[Object(r.jsx)("h4",{children:null!==t?t.name:"Welcome!"}),Object(r.jsx)("div",{className:"grey_name",children:Object(r.jsx)("h5",{children:null!==t?t.artists[0].name:""})})]}),Object(r.jsx)(w.a,{item:!0,children:Object(r.jsx)(L.a,{fontSize:"large",className:"footer__icon",onClick:function(){console.log("footerview",t.name,a),t&&function(e,t,c,r){if(!r.includes(e.name)){var a=[e.name].concat(Object(I.a)(r.flat()));c({type:"SET_LIKEDSONGS",likedSongs:a}),P.database().ref("users/"+t.id).set({Likes:a})}}(t,a,i,s)}})}),Object(r.jsx)(S.b,{to:"/liked",children:Object(r.jsx)(w.a,{item:!0,children:Object(r.jsx)(U.a,{fontSize:"large",className:"footer__icon",style:{fill:"white"}})})})]}),Object(r.jsxs)("div",{className:"footer__center",children:[Object(r.jsx)(B.a,{fontSize:"large",className:"footer__icon",onClick:function(){return c.resume()}}),Object(r.jsx)(G.a,{fontSize:"large",className:"footer__icon",onClick:function(){return c.pause()}}),Object(r.jsx)(S.b,{to:"/lyrics",children:Object(r.jsx)(w.a,{item:!0,children:null===t?Object(r.jsx)(D.a,{style:{fill:"gray"},fontSize:"large",className:"footer__icon"}):Object(r.jsx)(D.a,{style:{fill:"white"},fontSize:"large",className:"footer__icon"})})})]}),Object(r.jsx)("div",{className:"footer__right",children:Object(r.jsxs)(w.a,{container:!0,spacing:2,children:[Object(r.jsx)(w.a,{item:!0,children:Object(r.jsx)(z.a,{})}),Object(r.jsx)(w.a,{item:!0,xs:!0,children:Object(r.jsx)(R.a,{value:j,onChange:function(e,t){b(t),c.setVolume(j/100)},valueLabelDisplay:"auto"})})]})})]})},K=c(54),J=function(e){return Object(K.a)(e),Object(r.jsx)("div",{className:"flexboxWrapper",children:Object(r.jsx)("div",{className:"nullButton",children:Object(r.jsx)(S.b,{to:"/",children:Object(r.jsx)("button",{className:"button",children:"You need to select a track to view lyrics"})})})})};var W=function(){var e=p(),t=Object(l.a)(e,1)[0],c=t.currentTrack,s=t.player,i=t.user,o=n.a.useState(),u=Object(l.a)(o,2),j=u[0],b=u[1];n.a.useEffect(Object(N.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=5;break}return e.next=3,C.getId(c.artists[0].name,c.name);case 3:t=e.sent,b(C.getLyrics(t));case 5:case"end":return e.stop()}}),e)}))),[c]);var d=A(j),h=Object(l.a)(d,2),m=h[0],O=h[1];return Object(r.jsx)(a.Fragment,{children:k(j,m,O)||Object(r.jsxs)(a.Fragment,{children:[c&&m&&Object(r.jsx)(T,{spotifyObject:c,lyricsData:m}),void 0===m&&c&&Object(r.jsx)(_,{spotifyObject:c}),null===m&&null==c&&Object(r.jsx)(J,{spotifyObject:c}),Object(r.jsx)(F,{currentTrack:c,player:s,user:i})]})})},Y=function(e){var t=e.searchResult,c=e.set_currentTrack,a=e.set_currentArtist,n=e.set_currentAlbum;return Object(r.jsx)("div",{className:"searchMODE",children:t.map((function(e){return Object(r.jsxs)("span",{className:"searchResult",children:[Object(r.jsxs)("div",{className:"searchName",children:[Object(r.jsx)("b",{children:e.name})," ",e.artist," "]}),"artist"===e.type?Object(r.jsx)(S.b,{to:"/artist",children:Object(r.jsx)("img",{className:"searchPic",onClick:function(){a(e)},src:e.images[0]?e.images[0].url:"https://suitabletech.com/images/HelpCenter/errors/Lenovo-Camera-Error.JPG",alt:""})}):"track"===e.type?Object(r.jsx)(S.b,{to:"/track",children:Object(r.jsx)("img",{className:"searchPic",onClick:function(){c(e)},src:e.album.images[0]&&e.album.images[0].url,alt:""})}):"album"===e.type&&Object(r.jsx)(S.b,{to:"/album",children:Object(r.jsx)("img",{className:"searchPic",onClick:function(){n(e)},src:e.images[0]?e.images[0].url:"https://suitabletech.com/images/HelpCenter/errors/Lenovo-Camera-Error.JPG",alt:""})})]},e.id)}))})};var M=function(e){var t=e.spotify_uri,c=e.playerInstance._options,r=c.getOAuthToken,a=c.id;r((function(e){fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(a),{method:"PUT",body:JSON.stringify({uris:[t]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}})}))},q=(c(42),function(e){var t=e.currentArtist;return Object(r.jsxs)("div",{className:"style",children:[Object(r.jsx)(S.b,{to:"/",children:Object(r.jsx)("button",{className:"button",children:"Back to search"})}),Object(r.jsxs)("div",{className:"artistName",children:[t.name," "]}),Object(r.jsx)("img",{className:"artistPic",src:t.images[0].url,alt:""}),Object(r.jsxs)("div",{className:"artistInfo",children:["Followers: ",t.followers.total," "]}),Object(r.jsxs)("div",{className:"artistInfo",children:["Genre: ",t.genres[0]," "]}),Object(r.jsxs)("div",{className:"artistInfo",children:["Popularity: ",t.popularity," "]})]})});var H=function(){var e=p(),t=Object(l.a)(e,1)[0],c=t.currentArtist,n=t.player,s=t.user,i=t.currentTrack;return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(q,{currentArtist:c}),Object(r.jsx)(F,{currentTrack:i,player:n,user:s})]})};var V=function(){var e=p(),t=Object(l.a)(e,2),c=t[0],s=c.player,i=c.token,o=c.currentTrack,u=c.user,j=c.likedSongs,b=t[1],d=n.a.useState(null),h=Object(l.a)(d,2),m=h[0],O=h[1],y=A(m),v=Object(l.a)(y,2),g=v[0],N=v[1];return Object(a.useEffect)((function(){if(u)(function(e,t){var c=e.id;P.database().ref("users/"+c.replace(".","/")).once("value",(function(e){if(e.val()){var c=Object.values(e.val());t({type:"SET_LIKEDSONGS",likedSongs:c})}}))})(u,b)}),[u]),n.a.useEffect((function(){return O(x.search({type:"artist",text:"A",token:i}))}),[i]),Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(f,{onSearch:function(e,t){return O(x.search({type:e,text:t,token:i}))}}),k(m,g,N)||Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(Y,{searchResult:g,set_currentTrack:function(e){b({type:"SET_CURRENTTRACK",currentTrack:e}),M({playerInstance:s,spotify_uri:e.uri})},set_currentArtist:function(e){b({type:"SET_CURRENTARTIST",currentArtist:e})},set_currentAlbum:function(e){b({type:"SET_CURRENTALBUM",currentAlbum:e})}}),Object(r.jsx)(F,{currentTrack:o,player:s,user:u,likedSongs:j,dispatch:b})]})]})};var Z=function(){var e=p(),t=Object(l.a)(e,2),c=t[0].token,r=t[1];return n.a.useEffect((function(){!function(e,t){var c=document.createElement("script");c.type="text/javascript",c.readyState?c.onreadystatechange=function(){"loaded"!==c.readyState&&"complete"!==c.readyState||(c.onreadystatechange=null,t())}:c.onload=t,c.src=e,document.getElementsByTagName("head")[0].appendChild(c)}("https://sdk.scdn.co/spotify-player.js"),window.onSpotifyWebPlaybackSDKReady=function(){var e=new window.Spotify.Player({name:"Popify player",getOAuthToken:function(e){e(c)},volume:.1});e.addListener("ready",(function(e){var t=e.device_id;console.log("Ready with Device ID",t)})),r({type:"SET_PLAYER",player:e}),e.connect()}}),[]),""},X=(c(48),function(e){var t=e.currentAlbum,c=e.albumTracks;return Object(r.jsx)("div",{className:"flexboxWrapper",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"column",children:Object(r.jsx)("div",{className:"trackContainer",children:Object(r.jsx)("img",{className:"trackPic",src:t.images[0]&&t.images[0].url,alt:""})})}),Object(r.jsx)("div",{className:"column",children:Object(r.jsxs)("div",{className:"lyricsContainer",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{className:"artistTitle",children:t.artists[0].name}),Object(r.jsx)("span",{className:"trackTitle",children:t.name})]}),Object(r.jsx)(S.b,{to:"/",children:Object(r.jsx)("button",{className:"button",children:"Back to search"})}),Object(r.jsx)("div",{children:Object(r.jsxs)("table",{className:"albumSongList",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Nr"}),Object(r.jsx)("th",{children:"Track"})]})}),Object(r.jsx)("tbody",{children:c.items.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.track_number}),Object(r.jsx)("td",{className:"trackName",children:e.name})]},e.id)}))})]})})]})})]})})});var Q=function(){var e=p(),t=Object(l.a)(e,1)[0],c=t.player,s=t.user,i=t.currentTrack,o=t.currentAlbum,u=t.token,j=n.a.useState(null),b=Object(l.a)(j,2),d=b[0],h=b[1];n.a.useEffect((function(){return h(o&&x.searchAlbum({id:o.id,token:u}))}),[o,u]);var m=A(d),O=Object(l.a)(m,1)[0];return Object(r.jsxs)(a.Fragment,{children:[O&&Object(r.jsx)(X,{currentAlbum:o,albumTracks:O}),Object(r.jsx)(F,{currentTrack:i,player:c,user:s})]})},$=function(e){var t=e.likedSongs;return Object(r.jsx)("div",{className:"trackContainer",children:Object(r.jsxs)("div",{children:[Object(r.jsxs)(S.b,{to:"/",children:[" ",Object(r.jsx)("button",{className:"button",children:"Back to search"})]}),Object(r.jsx)("h1",{className:"loadedTrack",children:t})]})})};var ee=function(){var e=p(),t=Object(l.a)(e,2),c=t[0],n=c.user,s=c.likedSongs,i=c.currentTrack,o=c.player,u=c.currentArtist;return t[1],Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)($,{currentArtist:u,likedSongs:s}),Object(r.jsx)(F,{currentTrack:i,player:o,user:n})]})},te=c(12);var ce=function(e){e.spotify;var t=p(),c=Object(l.a)(t,2),a=c[0];return a.player,a.token,a.user,a.likedSongs,c[1],Object(r.jsxs)(S.a,{children:[Object(r.jsxs)(te.c,{children:[Object(r.jsx)(te.a,{path:"/lyrics",children:Object(r.jsx)(W,{})}),Object(r.jsx)(te.a,{path:"/liked",children:Object(r.jsx)(ee,{})}),Object(r.jsx)(te.a,{path:"/artist",children:Object(r.jsx)(H,{})}),Object(r.jsx)(te.a,{path:"/album",children:Object(r.jsx)(Q,{})}),Object(r.jsx)(te.a,{path:"/",children:Object(r.jsx)(V,{})})]}),Object(r.jsx)(Z,{})]})},re=new h.a;var ae=function(){var e=p(),t=Object(l.a)(e,2),c=t[0],n=c.token,s=(c.user,c.likedSongs,t[1]);return Object(a.useEffect)((function(){var e=window.location.hash.substring(1).split("&").reduce((function(e,t){var c=t.split("=");return e[c[0]]=decodeURIComponent(c[1]),e}),{});window.location.hash="";var t=e.access_token;t&&(s({type:"SET_TOKEN",token:t}),re.setAccessToken(t),re.getMe().then((function(e){s({type:"SET_USER",user:e})})),re.getUserPlaylists().then((function(e){s({type:"SET_PLAYLISTS",playlists:e})})),re.getPlaylist("37i9dQZF1E34Ucml4HHx1w").then((function(e){s({type:"SET_DISCOVER_WEEKLY",discover_weekly:e})})))}),[]),Object(r.jsx)("div",{className:"App",children:n?Object(r.jsx)(ce,{}):Object(r.jsx)(b,{})})},ne=c(13),se=function(e,t){switch(t.type){case"SET_USER":return Object(ne.a)(Object(ne.a)({},e),{},{user:t.user});case"SET_TOKEN":return Object(ne.a)(Object(ne.a)({},e),{},{token:t.token});case"SET_PLAYLISTS":return Object(ne.a)(Object(ne.a)({},e),{},{playlists:t.playlists});case"SET_DISCOVER_WEEKLY":return Object(ne.a)(Object(ne.a)({},e),{},{discover_weekly:t.discover_weekly});case"SET_CURRENTTRACK":return Object(ne.a)(Object(ne.a)({},e),{},{currentTrack:t.currentTrack});case"SET_CURRENTARTIST":return Object(ne.a)(Object(ne.a)({},e),{},{currentArtist:t.currentArtist});case"SET_CURRENTALBUM":return Object(ne.a)(Object(ne.a)({},e),{},{currentAlbum:t.currentAlbum});case"SET_PLAYER":return Object(ne.a)(Object(ne.a)({},e),{},{player:t.player});case"SET_CURRENTUSER":return Object(ne.a)(Object(ne.a)({},e),{},{currentUser:t.currentUser});case"SET_LIKEDSONGS":return Object(ne.a)(Object(ne.a)({},e),{},{likedSongs:t.likedSongs});default:return e}};i.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(O,{initialState:{user:null,token:null,playlists:[],playing:!1,item:null,currentTrack:null,currentArtist:null,currentAlbum:null,player:null,currentUser:null,likedSongs:[]},reducer:se,children:Object(r.jsx)(ae,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.183d565c.chunk.js.map